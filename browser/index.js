(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.promobar = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};exports.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n&&(t[e]=t[e]||{queue:[]},t[e].queue.push(n))},r=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=!!t[e]&&t[e].queue;r&&r.forEach(function(e){return e(n)})};return _extends({},e,{emit:r,on:n})};
},{}],2:[function(require,module,exports){
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Stockpile=t()}(this,function(){"use strict";var e=function(e){function t(){l.setItem(e,c(s))}function n(e){return s[e]||null}function o(e,n){s[e]=n,t()}function i(e){delete s[e],t()}function u(){l.removeItem(e)}function r(e){return null!==n(e)}var f=JSON.parse,c=JSON.stringify,l=window.localStorage,s=f(l.getItem(e))||{};return{get:n,set:o,remove:i,clear:u,exists:r}};return e});
},{}],3:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_stockpile=require("stockpile.js"),_stockpile2=_interopRequireDefault(_stockpile),_loop=require("loop.js"),_loop2=_interopRequireDefault(_loop),storage=(0,_stockpile2.default)("promobar"),now=function(){return(new Date).getTime()},height=function(e){return Math.max(e.offsetHeight,e.scrollHeight,e.clientHeight)},merge=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.forEach(function(t){return Object.keys(t).forEach(function(r){return e[r]=t[r]})}),e},error={content:function(){return console.warn("promobar: content is undefined")}},createPlaceholder=function(){var e=document.createElement("div");return e.className="promobar-placeholder",e.style.height="0px",document.body.insertBefore(e,document.body.children[0]),e},createStyle=function(){var e=document.createElement("style");return document.body.insertBefore(e,document.body.children[0]),e},store=function(e){return storage.set("root",{timestamp:(new Date).getTime(),body:e})},isEnabled=function(e,t){return function(r){var n=storage.get("root"),o=864e5;if(!n)return!0;var a=(r-n.timestamp)/o;return n.body!==t||a>=e}},addAttributes=function(e){return e.forEach(function(e){e&&(Array.isArray(e)?e[1]()?e[0].setAttribute("data-promobar","true"):e[0].removeAttribute("data-promobar"):e.setAttribute("data-promobar","true"))})},offsetPlaceholder=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e.style.height=t?t+"px":"0px"};exports.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,_loop2.default)(),n=merge({content:document.getElementById("promobarContent").innerHTML,resize:!0,placeholder:!0,offsets:[],close:Array.prototype.slice.call(document.querySelectorAll(".js-promobarClose")),lifespan:1},t);if(!n.content)return error.content();var o=isEnabled(n.lifespan,n.content),a=function(){return"function"==typeof n.placeholder?n.placeholder():n.placeholder},i=n.offsets.length>0,c=a()?createPlaceholder():null,l=i?createStyle():null,u={active:!1,enabled:o(now()),height:height(e)},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;a()&&offsetPlaceholder(c,e),i&&(addAttributes(n.offsets),l.innerHTML="[data-promobar] { "+(e?"transform: translateY("+e+"px) }":"}"))},d=function(){u.enabled&&(u.active=!0,s(u.height),e.classList.add("is-active"),document.body.classList.add("promobar-is-active"),r.emit("show",u))},f=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];u.enabled&&(u.active=!1,t&&(store(n.content),u.enabled=o(now())),s(),e.classList.remove("is-active"),document.body.classList.remove("promobar-is-active"),r.emit("hide",u))},h=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(u.enabled){var n=height(e);(t||n!==u.height)&&(u.height=n,u.active?s(n):d(),r.emit("update",u))}},p=function(){storage.remove("root"),u.enabled=o(now())};return n.resize?window.addEventListener("resize",function(e){return h()}):null,n.close.forEach(function(e){return e.addEventListener("click",function(e){e.preventDefault(),f(),store(n.content),u.enabled=o(now()),r.emit("disabled",u)})}),_extends({},r,{hide:f,show:d,update:h,reset:p,getState:function(){return u}})};
},{"loop.js":1,"stockpile.js":2}]},{},[3])(3)
});